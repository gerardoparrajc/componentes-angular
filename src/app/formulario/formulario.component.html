<form [formGroup]="formulario" (ngSubmit)="onSubmit()">
  <div id="user-data" formGroupName="datosUsuario">
    <div class="campo">
      <label for="username">Usuario</label>
      <input type="text" name="username" id="username" formControlName="username">
      <span class="error" *ngIf="formulario.get('datosUsuario.username')!.touched && formulario.get('datosUsuario.username')!.hasError('required')">Este campo es obligatorio</span>
      <span class="error" *ngIf="formulario.get('datosUsuario.username')!.touched && formulario.get('datosUsuario.username')!.hasError('nombreProhibido')">Este nombre ya está en uso</span>

    </div>
    <div class="campo">
      <label for="email">Email</label>
      <input type="email" name="email" id="email" formControlName="email" >
      <span *ngIf="formulario.get('datosUsuario.email')!.touched">
        <span class="error" *ngIf="formulario.get('datosUsuario.email')!.hasError('required')">El campo email es obligatorio</span>
        <span class="error" *ngIf="formulario.get('datosUsuario.email')!.hasError('email')">El email no es válido</span>
        <span class="error" *ngIf="formulario.get('datosUsuario.email')!.hasError('emailProhibido')">El email tiene que tener dominio @gmail.com</span>
      </span>
    </div>
    <div class="campo">
      <label for="age">Edad</label>
      <input type="number" name="age" id="age" formControlName="edad">
      <span *ngIf="formulario.get('datosUsuario.edad')!.touched">
        <span class="error" *ngIf="formulario.get('datosUsuario.edad')!.hasError('min')">La edad tiene que ser mayor de 18 años</span>
        <span class="error" *ngIf="formulario.get('datosUsuario.edad')!.hasError('max')">La edad tiene que ser menor de 65 años</span>
        <span class="error" *ngIf="formulario.get('datosUsuario.edad')!.hasError('required')">Este campo es obligatorio</span>
      </span>
    </div>
  </div>
  <div class="campo">
    <label for="city">Ciudad</label>
    <select name="city" id="city" formControlName="city">
      <option value="almeria">Almería</option>
      <option value="madrid">Madrid</option>
      <option value="valencia">Valencia</option>
    </select>
  </div>

  <div class="campo">
    <input type="checkbox" name="aceptacion" id="aceptacion" formControlName="aceptacion">
    <label for="aceptacion">Acepto los términos legales blah blah blah</label>
    <span *ngIf="formulario.get('aceptacion')!.hasError('required')" class="error">Debes aceptar los términos legales</span>
  </div>

  <button  class="btn">Enviar</button>
</form>
